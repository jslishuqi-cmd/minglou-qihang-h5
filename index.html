<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>“明楼”启航加油站 - 职业探索问卷</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- 开始页 -->
  <section id="page-start" class="page">
    <div class="container">
      <h1 class="brand">“明楼”启航加油站</h1>
      <p class="subtitle">职业探索 · 预画像 · 用完即走</p>
      <p style="margin:6px 0;color:#a9b0b8;">云端状态：<span id="cloud-status">检测中…</span></p>
      <div class="card">
        <label for="userName" class="label">请输入姓名或昵称（用于标识报告）</label>
        <input id="userName" type="text" class="input" placeholder="例如：张三 / 小明" />
        <button id="startBtn" class="btn primary" disabled>开始测试</button>
      </div>
      <div class="tips">
        <p>本工具用于“前置数据采集与初步画像”，完成后将生成初步报告并引导真人深度解读。</p>
      </div>
    </div>
  </section>

  <!-- 霍兰德页 -->
  <section id="page-holland" class="page" style="display:none;">
    <div class="container">
      <h2>霍兰德职业兴趣（60题）</h2>
      <div class="progress-wrap">
        <div class="progress-bar"><div id="holland-progress" class="progress"></div></div>
        <div id="holland-progress-text" class="progress-text">1/60</div>
      </div>
      <div class="card question-card">
        <p id="holland-question" class="question">加载中...</p>
        <div class="options">
          <button class="option-btn" data-value="1">是 / 同意</button>
          <button class="option-btn" data-value="0">否 / 不同意</button>
        </div>
        <p id="holland-encourage" class="encourage">很好！继续保持！</p>
      </div>
      <div class="nav">
        <button id="holland-prev" class="btn">上一题</button>
        <button id="holland-next" class="btn primary" disabled>下一题</button>
      </div>
    </div>
  </section>

  <!-- MBTI页 -->
  <section id="page-mbti" class="page" style="display:none;">
    <div class="container">
      <h2>MBTI性格偏好（100题）</h2>
      <div class="progress-wrap">
        <div class="progress-bar"><div id="mbti-progress" class="progress"></div></div>
        <div id="mbti-progress-text" class="progress-text">1/100</div>
      </div>
      <div class="card question-card">
        <p id="mbti-question" class="question">加载中...</p>
        <div class="options">
          <button id="mbti-option-a" class="option-btn" data-value="A">选项A</button>
          <button id="mbti-option-b" class="option-btn" data-value="B">选项B</button>
        </div>
        <p id="mbti-encourage" class="encourage">很好！继续保持！</p>
      </div>
      <div class="nav">
        <button id="mbti-prev" class="btn">上一题</button>
        <button id="mbti-next" class="btn primary" disabled>下一题</button>
      </div>
    </div>
  </section>

  <!-- 报告页 -->
  <section id="page-report" class="page" style="display:none;">
    <div class="container">
      <h2>初步综合报告</h2>
      <div class="card">
        <div class="result-line">
          <span class="result-label">霍兰德代码：</span>
          <span id="holland-result" class="result-value">-</span>
        </div>
        <p id="holland-desc" class="desc">-</p>
        <div class="result-line">
          <span class="result-label">MBTI类型：</span>
          <span id="mbti-result" class="result-value">-</span>
        </div>
        <p id="mbti-desc" class="desc">-</p>
        <div class="insight">
          <p id="combined-insight">-</p>
        </div>
      </div>

      <!-- 转化核心：醒目的引导区 -->
      <div class="cta">
        <h3>机器分析仅是开始，真正的宝藏需要共同挖掘</h3>
        <p>想获得一份专属于你的深度解读报告？请联系我们的专业顾问。</p>
        <div class="contact">
          <img src="assets/wechat-qr.png" alt="微信二维码" style="width:120px;height:120px;border-radius:16px;border:3px dashed var(--primary);" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
          <div class="qr-placeholder" style="display:none;">QR</div>
          <div class="contact-info">
            <p>客服微信：请扫码添加</p>
            <p>电话：13957206883</p>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" href="admin.html" target="_blank">管理员数据看板</a>
        <button class="btn" onclick="location.reload()">重新开始</button>
      </div>
    </div>
  </section>

  <!-- Supabase 初始化：统一引用 SDK 与全局配置 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <script>
    // 显示云端连接状态
    (function(){
      const el = document.getElementById('cloud-status');
      if (!el) return;
      if (window.supabaseClient) {
        el.textContent = '已连接';
        el.style.color = '#16a34a';
      } else {
        el.textContent = '离线（使用本地存储）';
        el.style.color = '#dc2626';
      }
    })();
  </script>

  <script src="app.js"></script>
</body>
</html>